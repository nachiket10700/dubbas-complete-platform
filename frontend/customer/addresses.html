<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Addresses - Dabba's</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* Same navigation and sidebar styles as previous pages */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #f8f9fc;
            color: #2d2d2d;
        }

        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            padding: 1rem 2rem;
            background: white;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
        }

        .logo {
            font-size: 2rem;
            font-weight: 800;
            background: linear-gradient(135deg, #ff6b6b, #ff8e8e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-decoration: none;
        }

        .logo span {
            background: linear-gradient(135deg, #4ecdc4, #45b7af);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .nav-right {
            display: flex;
            align-items: center;
            gap: 2rem;
        }

        .cart-icon {
            position: relative;
            cursor: pointer;
        }

        .cart-icon i {
            font-size: 1.3rem;
            color: #666;
        }

        .cart-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #ff6b6b;
            color: white;
            font-size: 0.7rem;
            padding: 0.2rem 0.5rem;
            border-radius: 50%;
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            padding: 0.5rem 1rem;
            background: #f5f5f5;
            border-radius: 50px;
        }

        .user-avatar {
            width: 35px;
            height: 35px;
            background: linear-gradient(135deg, #ff6b6b, #ff8e8e);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        .sidebar {
            position: fixed;
            left: 0;
            top: 70px;
            width: 280px;
            height: calc(100vh - 70px);
            background: white;
            border-right: 1px solid #f0f0f0;
            padding: 2rem 1rem;
            overflow-y: auto;
        }

        .nav-menu {
            list-style: none;
        }

        .nav-item {
            margin-bottom: 0.5rem;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            color: #666;
            text-decoration: none;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .nav-link i {
            width: 20px;
            color: #ff6b6b;
        }

        .nav-link:hover, .nav-link.active {
            background: linear-gradient(135deg, #ff6b6b, #ff8e8e);
            color: white;
        }

        .nav-link:hover i, .nav-link.active i {
            color: white;
        }

        .main-content {
            margin-left: 280px;
            margin-top: 70px;
            padding: 2rem;
        }

        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .page-header h1 {
            font-size: 2rem;
            font-weight: 700;
        }

        .btn-primary {
            padding: 1rem 2rem;
            background: linear-gradient(135deg, #ff6b6b, #ff8e8e);
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(255, 107, 107, 0.3);
        }

        /* Addresses Grid */
        .addresses-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .address-card {
            background: white;
            border-radius: 20px;
            padding: 1.5rem;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.03);
            transition: all 0.3s ease;
            border: 2px solid transparent;
            position: relative;
        }

        .address-card:hover {
            border-color: #ff6b6b;
            transform: translateY(-2px);
        }

        .address-card.default {
            border-color: #4caf50;
            background: #f1f9f1;
        }

        .address-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            padding: 0.3rem 1rem;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .badge-default {
            background: #4caf50;
            color: white;
        }

        .badge-home {
            background: #ff6b6b;
            color: white;
        }

        .badge-work {
            background: #2196f3;
            color: white;
        }

        .badge-other {
            background: #ff9800;
            color: white;
        }

        .address-type {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
            padding-right: 80px;
        }

        .type-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #fff5f0, #ffeae4);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #ff6b6b;
            font-size: 1.2rem;
        }

        .type-name {
            font-size: 1.1rem;
            font-weight: 600;
        }

        .address-details {
            margin-bottom: 1.5rem;
            padding-left: 3rem;
        }

        .address-line {
            color: #666;
            margin-bottom: 0.3rem;
            line-height: 1.5;
        }

        .address-phone {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #666;
            margin-top: 0.5rem;
        }

        .address-phone i {
            color: #ff6b6b;
        }

        .address-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid #f0f0f0;
        }

        .btn-edit, .btn-delete, .btn-set-default {
            flex: 1;
            padding: 0.5rem;
            border: none;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.3rem;
        }

        .btn-edit {
            background: #e3f2fd;
            color: #1976d2;
        }

        .btn-delete {
            background: #ffebee;
            color: #d32f2f;
        }

        .btn-set-default {
            background: #d4edda;
            color: #155724;
        }

        .btn-edit:hover, .btn-delete:hover, .btn-set-default:hover {
            transform: translateY(-2px);
            filter: brightness(0.95);
        }

        /* Add Address Card */
        .add-address-card {
            background: #f8f9fc;
            border: 2px dashed #ff6b6b;
            border-radius: 20px;
            padding: 2rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            min-height: 250px;
        }

        .add-address-card:hover {
            background: #ffeae4;
        }

        .add-address-card i {
            font-size: 3rem;
            color: #ff6b6b;
            margin-bottom: 1rem;
        }

        .add-address-card h3 {
            margin-bottom: 0.5rem;
        }

        .add-address-card p {
            color: #666;
            text-align: center;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            overflow-y: auto;
        }

        .modal-content {
            background: white;
            max-width: 600px;
            margin: 2rem auto;
            padding: 2rem;
            border-radius: 20px;
            position: relative;
        }

        .close {
            position: absolute;
            top: 1rem;
            right: 1.5rem;
            font-size: 2rem;
            cursor: pointer;
            color: #999;
        }

        .modal h2 {
            margin-bottom: 2rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 1rem;
            border: 2px solid #f0f0f0;
            border-radius: 10px;
            font-size: 1rem;
            font-family: 'Inter', sans-serif;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: #ff6b6b;
        }

        .radio-group {
            display: flex;
            gap: 2rem;
            margin-top: 0.5rem;
        }

        .radio-group label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: normal;
            cursor: pointer;
        }

        .radio-group input[type="radio"] {
            width: 18px;
            height: 18px;
            accent-color: #ff6b6b;
        }

        .checkbox {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
        }

        .checkbox input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: #ff6b6b;
        }

        .btn-save {
            width: 100%;
            padding: 1rem;
            background: linear-gradient(135deg, #ff6b6b, #ff8e8e);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 1rem;
        }

        .btn-save:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(255, 107, 107, 0.3);
        }

        /* Location Detection */
        .location-detect {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
            padding: 1rem;
            background: #f8f9fc;
            border-radius: 10px;
            cursor: pointer;
        }

        .location-detect i {
            font-size: 1.5rem;
            color: #ff6b6b;
        }

        .location-detect:hover {
            background: #ffeae4;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
            background: white;
            border-radius: 20px;
            grid-column: 1 / -1;
        }

        .empty-state i {
            font-size: 5rem;
            color: #ff6b6b;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        .empty-state h3 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .empty-state p {
            color: #666;
            margin-bottom: 2rem;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <a href="/frontend/index.html" class="logo">Dabba<span>'s</span></a>
        <div class="nav-right">
            <div class="cart-icon">
                <i class="fas fa-shopping-cart"></i>
                <span class="cart-badge">3</span>
            </div>
            <div class="user-menu">
                <div class="user-avatar">JD</div>
                <span>John Doe</span>
                <i class="fas fa-chevron-down"></i>
            </div>
        </div>
    </nav>

    <!-- Sidebar -->
    <aside class="sidebar">
        <ul class="nav-menu">
            <li class="nav-item">
                <a href="dashboard.html" class="nav-link">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="orders.html" class="nav-link">
                    <i class="fas fa-shopping-bag"></i>
                    <span>My Orders</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="subscriptions.html" class="nav-link">
                    <i class="fas fa-calendar-alt"></i>
                    <span>Subscriptions</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="wishlist.html" class="nav-link">
                    <i class="fas fa-heart"></i>
                    <span>Wishlist</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="payments.html" class="nav-link">
                    <i class="fas fa-credit-card"></i>
                    <span>Payments</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="addresses.html" class="nav-link active">
                    <i class="fas fa-map-marker-alt"></i>
                    <span>Addresses</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="complaints.html" class="nav-link">
                    <i class="fas fa-exclamation-circle"></i>
                    <span>Complaints</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="notifications.html" class="nav-link">
                    <i class="fas fa-bell"></i>
                    <span>Notifications</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="profile.html" class="nav-link">
                    <i class="fas fa-user"></i>
                    <span>Profile</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="login.html" class="nav-link" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </a>
            </li>
        </ul>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <div class="page-header">
            <h1>My Addresses</h1>
            <button class="btn-primary" onclick="openAddAddressModal()">
                <i class="fas fa-plus"></i> Add New Address
            </button>
        </div>

        <!-- Addresses Grid -->
        <div class="addresses-grid" id="addressesGrid">
            <!-- Addresses will be loaded here -->
        </div>
    </main>

    <!-- Add/Edit Address Modal -->
    <div id="addressModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="modalTitle">Add New Address</h2>
            
            <div class="location-detect" onclick="detectLocation()">
                <i class="fas fa-map-marker-alt"></i>
                <div>
                    <strong>Use my current location</strong>
                    <p>Auto-detect your address</p>
                </div>
            </div>

            <form id="addressForm">
                <div class="form-group">
                    <label>Address Type</label>
                    <div class="radio-group">
                        <label>
                            <input type="radio" name="addressType" value="home" checked> üè† Home
                        </label>
                        <label>
                            <input type="radio" name="addressType" value="work"> üíº Work
                        </label>
                        <label>
                            <input type="radio" name="addressType" value="other"> üìç Other
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label>Full Name</label>
                    <input type="text" id="fullName" placeholder="Receiver's full name" required>
                </div>

                <div class="form-group">
                    <label>Phone Number</label>
                    <input type="tel" id="phone" placeholder="10-digit mobile number" required>
                </div>

                <div class="form-group">
                    <label>Address Line 1</label>
                    <input type="text" id="addressLine1" placeholder="House/Flat No., Building Name" required>
                </div>

                <div class="form-group">
                    <label>Address Line 2 (Optional)</label>
                    <input type="text" id="addressLine2" placeholder="Area, Colony, Street">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>City</label>
                        <input type="text" id="city" placeholder="City" required>
                    </div>
                    <div class="form-group">
                        <label>State</label>
                        <select id="state" required>
                            <option value="">Select State</option>
                            <option value="maharashtra">Maharashtra</option>
                            <option value="delhi">Delhi</option>
                            <option value="karnataka">Karnataka</option>
                            <option value="tamilnadu">Tamil Nadu</option>
                            <option value="telangana">Telangana</option>
                            <option value="westbengal">West Bengal</option>
                            <option value="gujarat">Gujarat</option>
                            <option value="punjab">Punjab</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Pincode</label>
                        <input type="text" id="pincode" placeholder="6-digit pincode" required>
                    </div>
                    <div class="form-group">
                        <label>Landmark (Optional)</label>
                        <input type="text" id="landmark" placeholder="Near...">
                    </div>
                </div>

                <div class="checkbox">
                    <input type="checkbox" id="setDefault">
                    <label for="setDefault">Set as default address</label>
                </div>

                <button type="submit" class="btn-save">Save Address</button>
            </form>
        </div>
    </div>

    <script>
        // Sample addresses data
        let addresses = [
            {
                id: 1,
                type: 'home',
                name: 'John Doe',
                phone: '9876543210',
                line1: 'Flat 101, Sunshine Apartments',
                line2: 'Andheri East',
                city: 'Mumbai',
                state: 'Maharashtra',
                pincode: '400069',
                landmark: 'Near Andheri Station',
                isDefault: true
            },
            {
                id: 2,
                type: 'work',
                name: 'John Doe',
                phone: '9876543211',
                line1: 'Office 505, Business Park',
                line2: 'Bandra Kurla Complex',
                city: 'Mumbai',
                state: 'Maharashtra',
                pincode: '400051',
                landmark: 'Near BKC Signal',
                isDefault: false
            },
            {
                id: 3,
                type: 'other',
                name: 'John Doe',
                phone: '9876543212',
                line1: 'Villa 7, Green Valley',
                line2: 'Lonavala',
                city: 'Pune',
                state: 'Maharashtra',
                pincode: '410401',
                landmark: 'Near Lake',
                isDefault: false
            }
        ];

        let currentAddressId = null;
        const modal = document.getElementById('addressModal');
        const modalTitle = document.getElementById('modalTitle');

        // Load addresses
        function loadAddresses() {
            const grid = document.getElementById('addressesGrid');
            
            if (addresses.length === 0) {
                grid.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-map-marker-alt"></i>
                        <h3>No addresses saved</h3>
                        <p>Add your delivery addresses for faster checkout</p>
                        <button class="btn-primary" onclick="openAddAddressModal()">
                            Add New Address
                        </button>
                    </div>
                `;
                return;
            }

            grid.innerHTML = addresses.map(addr => {
                const badgeClass = addr.type === 'home' ? 'badge-home' : addr.type === 'work' ? 'badge-work' : 'badge-other';
                const typeIcon = addr.type === 'home' ? 'fa-home' : addr.type === 'work' ? 'fa-briefcase' : 'fa-map-pin';
                
                return `
                    <div class="address-card ${addr.isDefault ? 'default' : ''}">
                        ${addr.isDefault ? '<span class="address-badge badge-default">Default</span>' : ''}
                        <span class="address-badge ${badgeClass}">${addr.type.charAt(0).toUpperCase() + addr.type.slice(1)}</span>
                        
                        <div class="address-type">
                            <div class="type-icon">
                                <i class="fas ${typeIcon}"></i>
                            </div>
                            <span class="type-name">${addr.type === 'home' ? 'Home' : addr.type === 'work' ? 'Work' : 'Other'}</span>
                        </div>

                        <div class="address-details">
                            <div class="address-line"><strong>${addr.name}</strong></div>
                            <div class="address-line">${addr.line1}</div>
                            ${addr.line2 ? `<div class="address-line">${addr.line2}</div>` : ''}
                            <div class="address-line">${addr.city}, ${addr.state} - ${addr.pincode}</div>
                            ${addr.landmark ? `<div class="address-line">Landmark: ${addr.landmark}</div>` : ''}
                            <div class="address-phone">
                                <i class="fas fa-phone"></i> ${addr.phone}
                            </div>
                        </div>

                        <div class="address-actions">
                            <button class="btn-edit" onclick="editAddress(${addr.id})">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            ${!addr.isDefault ? `
                                <button class="btn-set-default" onclick="setDefaultAddress(${addr.id})">
                                    <i class="fas fa-check-circle"></i> Set Default
                                </button>
                            ` : ''}
                            <button class="btn-delete" onclick="deleteAddress(${addr.id})">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                        </div>
                    </div>
                `;
            }).join('');

            // Add "Add New" card
            grid.innerHTML += `
                <div class="add-address-card" onclick="openAddAddressModal()">
                    <i class="fas fa-plus-circle"></i>
                    <h3>Add New Address</h3>
                    <p>Click here to add a new delivery address</p>
                </div>
            `;
        }

        // Open add modal
        function openAddAddressModal() {
            currentAddressId = null;
            modalTitle.textContent = 'Add New Address';
            document.getElementById('addressForm').reset();
            modal.style.display = 'block';
        }

        // Edit address
        function editAddress(id) {
            const address = addresses.find(a => a.id === id);
            if (address) {
                currentAddressId = id;
                modalTitle.textContent = 'Edit Address';
                
                // Fill form
                document.querySelector(`input[name="addressType"][value="${address.type}"]`).checked = true;
                document.getElementById('fullName').value = address.name;
                document.getElementById('phone').value = address.phone;
                document.getElementById('addressLine1').value = address.line1;
                document.getElementById('addressLine2').value = address.line2 || '';
                document.getElementById('city').value = address.city;
                document.getElementById('state').value = address.state.toLowerCase();
                document.getElementById('pincode').value = address.pincode;
                document.getElementById('landmark').value = address.landmark || '';
                document.getElementById('setDefault').checked = address.isDefault;
                
                modal.style.display = 'block';
            }
        }

        // Set default address
        function setDefaultAddress(id) {
            addresses = addresses.map(addr => ({
                ...addr,
                isDefault: addr.id === id
            }));
            loadAddresses();
            alert('Default address updated');
        }

        // Delete address
        function deleteAddress(id) {
            if (confirm('Are you sure you want to delete this address?')) {
                addresses = addresses.filter(addr => addr.id !== id);
                loadAddresses();
                alert('Address deleted');
            }
        }

        // Detect location
        function detectLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        alert(`Location detected! Coordinates: ${position.coords.latitude}, ${position.coords.longitude}`);
                        // Here you would reverse geocode to get address
                        document.getElementById('city').value = 'Mumbai';
                        document.getElementById('state').value = 'maharashtra';
                    },
                    (error) => {
                        alert('Unable to detect location. Please enter manually.');
                    }
                );
            } else {
                alert('Geolocation not supported');
            }
        }

        // Form submission
        document.getElementById('addressForm').addEventListener('submit', function(e) {
            e.preventDefault();

            const addressData = {
                id: currentAddressId || Date.now(),
                type: document.querySelector('input[name="addressType"]:checked').value,
                name: document.getElementById('fullName').value,
                phone: document.getElementById('phone').value,
                line1: document.getElementById('addressLine1').value,
                line2: document.getElementById('addressLine2').value,
                city: document.getElementById('city').value,
                state: document.getElementById('state').value,
                pincode: document.getElementById('pincode').value,
                landmark: document.getElementById('landmark').value,
                isDefault: document.getElementById('setDefault').checked
            };

            if (currentAddressId) {
                // Update existing address
                const index = addresses.findIndex(a => a.id === currentAddressId);
                if (index !== -1) {
                    addresses[index] = addressData;
                }
            } else {
                // Add new address
                if (addressData.isDefault) {
                    addresses = addresses.map(addr => ({ ...addr, isDefault: false }));
                }
                addresses.push(addressData);
            }

            loadAddresses();
            modal.style.display = 'none';
            alert(currentAddressId ? 'Address updated' : 'Address added');
        });

        // Close modal
        document.querySelector('.close').onclick = function() {
            modal.style.display = 'none';
        }

        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        }

        // Logout
        document.getElementById('logoutBtn').addEventListener('click', function(e) {
            e.preventDefault();
            localStorage.clear();
            sessionStorage.clear();
            window.location.href = 'login.html';
        });

        // Initialize
        loadAddresses();
    </script>
</body>
</html>